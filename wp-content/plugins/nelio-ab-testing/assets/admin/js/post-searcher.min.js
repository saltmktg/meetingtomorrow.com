var NelioABPostSearcher={formatSearchResult:function(d,b,e,a){var c=[];window.Select2.util.markMatch(d.title,e.term,c,a);var f=c.join("");return'<div class="result-content"><div class="result-image">'+d.thumbnail+'</div><div class="result-item"><div class="result-title">'+f+'</div><div class="result-author">'+d.author+'</div><div class="result-date">'+d.date.toLocaleString()+'</div><div class="result-type">'+d.type+" ("+d.id+')</div><div class="result-status">'+d.status+"</div></div></div>"},formatSelectionResult:function(b,a){a.data("post-id",b.id);a.data("excerpt",b.excerpt);return b.title},buildSearcher:function(d,c,a,b){d.data("current-type",c);d.select2({ajax:{url:ajaxurl,dataType:"json",type:"POST",data:function(f){var e={term:f,action:"nelioab_post_searcher",type:d.data("current-type"),drafts:a};return e},results:function(e){if(b!==undefined){e=b(d,e)}d.data("last-search",e);return{results:e}}},formatResult:NelioABPostSearcher.formatSearchResult,formatSelection:NelioABPostSearcher.formatSelectionResult,dropdownAutoWidth:true,dropdownCssClass:"bigdrop",escapeMarkup:function(e){return e}});NelioABPostSearcher.setPlaceholder(d)},getInfo:function(b){var a=b.parent().find(".select2-chosen");if(a.hasClass("select2-default")){return false}return{id:b.attr("value"),value:b.attr("value"),label:a.html(),title:a.text(),excerpt:a.data("excerpt")}},setDefault:function(c,b,a){jQuery.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{action:"nelioab_post_searcher",type:b,drafts:a,default_id:c.attr("value")}}).done(function(f){var e=f[0];var d=[];d.push(f[0]);c.data("last-search",d);NelioABPostSearcher.doSetDefault(c,e);c.trigger("default-value-loaded")})},changeType:function(b,a){b.attr("value",-1);b.data("current-type",a);NelioABPostSearcher.setDefault(b,a,"no-drafts")},doSetDefault:function(c,b){c.attr("value",b.id);var a=c.parent().find(".select2-chosen");a.html(b.title);a.parent().removeClass("select2-default");NelioABPostSearcher.formatSelectionResult(b,a)},setPlaceholder:function(b){var c=b.data("placeholder");var a=b.parent().find(".select2-chosen");a.html(c);a.parent().addClass("select2-default")}};